{% extends 'base.html' %}
{% block content %}
<div class="row justify-content-center mt-5">

  <div class="col-12">
    <div class="card">
      <div class="card-body">
        <div class="card-header py-0 d-flex flex-column flex-md-row align-items-center">
          <div>
            <div id="DataTables_Table_0_filter" class="dataTables_filter ms-n3 mb-0 mb-md-6"><label><input type="search"
                  class="form-control" placeholder="Поиск очереди" aria-controls="DataTables_Table_0"></label></div>
          </div>
        </div>
        <table class="table table-centered w-100" id="products-datatable">
          <thead>
            <tr>
              <th>#</th>
              <th>Итого</th>
              <th>Принято</th>
              <th>Сдача</th>
              <th>Дата</th>
              <th>Тип оплаты</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody id="product-table-body">
            {% for order in orders %}
            <tr>
              <td>
                <span class="text-primary" data-bs-toggle="modal" data-bs-target="#orderModal{{ order.id }}"><i
                    class="mdi mdi-cart me-1"></i>#{{ order.id }}</span>
                <div id="orderModal{{ order.id }}" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-body">
                        <span class="text-primary mb-1 fw-bold fs-4">
                          <i class="mdi mdi-cart me-1"></i>#{{ order.id }}
                        </span>
                        {% for i in order.soldhistory_set.all %}
                        <p>{{ i.product.name }}. {{ i.quantity }}шт. {{ i.total_sum }}C</p>
                        {% endfor %}
                      </div>
                    </div>
                  </div>
                </div>
              </td>
              <td>{{ order.total_sum }}</td>
              <td>{{ order.amount }}</td>
              <td>{{ order.change }}</td>
              <td>{{ order.created }}</td>
              <td>Mbank</td>
              <td>

                <button type="button" class="btn btn-danger btn-sm" data-bs-toggle="modal"
                  data-bs-target="#deleteModal"><i class="mdi mdi-cart me-1"></i>Удалить</button>
                <div id="deleteModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-body">
                        <form class="ps-3 pe-3" method="POST">
                          {% csrf_token %}
                          <p>Вы действительно хотите удалить этот ордер?</p>
                          <div class="mb-3 text-end">
                            <a class="btn btn-danger btn-sm" href="{% url 'order-history-delete' order.id %}">
                              Удалить
                            </a>
                          </div>
                        </form>
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="d-flex justify-content-end align-items-center mt-3 me-3">
        <nav aria-label="Page navigation">
          <ul class="pagination pagination-rounded d-flex align-items-center">
            <li class="page-item first">
              <a class="page-link waves-effect" href="javascript:void(0);"><i
                  class="bx bx-chevrons-left bx-sm"></i></a>
            </li>
            <li class="page-item prev">
              <a class="page-link waves-effect" href="javascript:void(0);"><i
                  class="bx bx-chevron-left bx-sm"></i></a>
            </li>
            <li class="page-item">
              <a class="page-link waves-effect" href="javascript:void(0);">1</a>
            </li>
            <li class="page-item">
              <a class="page-link waves-effect" href="javascript:void(0);">2</a>
            </li>
            <li class="page-item active">
              <a class="page-link waves-effect" href="javascript:void(0);">3</a>
            </li>
            <li class="page-item">
              <a class="page-link waves-effect" href="javascript:void(0);">4</a>
            </li>
            <li class="page-item">
              <a class="page-link waves-effect" href="javascript:void(0);">5</a>
            </li>
            <li class="page-item next">
              <a class="page-link waves-effect" href="javascript:void(0);"><i
                  class="bx bx-chevron-right bx-sm"></i></a>
            </li>
            <li class="page-item last">
              <a class="page-link waves-effect" href="javascript:void(0);"><i
                  class="bx bx-chevrons-right bx-sm"></i></a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>



  {% endblock %}